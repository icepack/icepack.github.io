

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Coding style &mdash; icepack 0.0.3 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Design" href="design.html" />
    <link rel="prev" title="Testing" href="testing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> icepack
          

          
          </a>

          
            
            
              <div class="version">
                0.0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="icepack.demo.00-meshes-functions.html">Meshes, functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="icepack.demo.01-synthetic-ice-shelf.html">Synthetic ice shelf</a></li>
<li class="toctree-l1"><a class="reference internal" href="icepack.demo.02-larsen-ice-shelf.html">Larsen Ice Shelf</a></li>
<li class="toctree-l1"><a class="reference internal" href="icepack.demo.03-synthetic-ice-stream.html">Synthetic ice stream</a></li>
<li class="toctree-l1"><a class="reference internal" href="icepack.demo.04-ice-shelf-inverse.html">Inverse problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="icepack.demo.05-hybrid-ice-stream.html">Ice streams, once more</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="contributing.html">Contributing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Coding style</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tooling">Tooling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#naming">Naming</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">icepack</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">icepack</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="contributing.html">Contributing</a> &raquo;</li>
        
      <li>Coding style</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/style.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="coding-style">
<h1>Coding style<a class="headerlink" href="#coding-style" title="Permalink to this headline">¶</a></h1>
<p>Icepack is a community project and we gratefully accept contributions from anyone.
At the same time, we also want to keep the code as readable and maintainable as possible and that involves a bit of discipline.
The Python development team has published a very general set of guidelines for Python coding style called <a class="reference external" href="https://pep8.org/">PEP8</a> and we try to conform to this as best we can.
There are specific considerations around coding style for scientific software that we’ll try to address too.</p>
<div class="section" id="tooling">
<h2>Tooling<a class="headerlink" href="#tooling" title="Permalink to this headline">¶</a></h2>
<p>There are tools like black or YAPF for automatically formatting code.
We sometimes use these tools on individual code patches but we do not apply them to the entire code base because they are often too rigid.
Other tools will merely point out potential problems and allow you, the coder, to either ignore or fix them according to your judgment.
For example, <a class="reference external" href="https://flake8.pycqa.org/en/latest/">flake8</a> can detect things like importing a module or a symbol but not actually using it, not putting the recommended amount of spacing around class or function definitions, and so forth.
The incantation we use for flake8 is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">flake8</span> <span class="o">--</span><span class="n">ignore</span><span class="o">=</span><span class="n">E741</span><span class="p">,</span><span class="n">E501</span><span class="p">,</span><span class="n">W504</span> <span class="o">./</span>
</pre></div>
</div>
<p>Another useful and much more stringent tool is <a class="reference external" href="https://github.com/PyCQA/pylint">pylint</a>.
Whereas flake8 looks mostly for stylistic problems, pylint will go so far as to suggest refactoring repeated code, reducing the number of arguments to a function or the number of local variables in its body, and so forth.
We typically invoke pylint with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pylint</span> <span class="o">--</span><span class="n">disable</span><span class="o">=</span><span class="n">invalid</span><span class="o">-</span><span class="n">name</span><span class="p">,</span><span class="n">non</span><span class="o">-</span><span class="n">ascii</span><span class="o">-</span><span class="n">name</span><span class="p">,</span><span class="n">attribute</span><span class="o">-</span><span class="n">defined</span><span class="o">-</span><span class="n">outside</span><span class="o">-</span><span class="n">init</span><span class="p">,</span><span class="n">invalid</span><span class="o">-</span><span class="n">unary</span><span class="o">-</span><span class="n">operand</span><span class="o">-</span><span class="nb">type</span> <span class="o">./</span>
</pre></div>
</div>
<p>Some of the advice that linters give is impractical to follow.
Both flake8 and pylint suggest that single-character identifier names like <code class="docutils literal notranslate"><span class="pre">i</span></code> and <code class="docutils literal notranslate"><span class="pre">j</span></code> are ambiguous.
If you were writing code for linear algebra, however, the variables <cite>i</cite> and <cite>j</cite> would match perfectly the names that are used in textbooks to denote a row and column of a matrix.</p>
</div>
<div class="section" id="naming">
<h2>Naming<a class="headerlink" href="#naming" title="Permalink to this headline">¶</a></h2>
<p>An old quote that’s become folklore by now: “There are only two hard things in computer science, cache invalidation and naming things.”</p>
<p>Throughout icepack, we employ two different guiding principles for how to name identifiers.
Some code is meant to be read by everyone – glaciologists, curious oceanographers, or us, the maintainers of the project.
For example, everyone will need to call the diagnostic and prognostic solve routines for some flow solver.
In these parts of the code base it’s critical to use English names that clearly and succinctly indicate the role of the object, like <code class="docutils literal notranslate"><span class="pre">velocity</span></code>, <code class="docutils literal notranslate"><span class="pre">thickness</span></code>, <code class="docutils literal notranslate"><span class="pre">viscosity</span></code>, <code class="docutils literal notranslate"><span class="pre">solve</span></code>, and so forth.</p>
<p>Other parts of the code are only meant to be read by someone who is familiar with the physics and mathematics.
This code should look as much like the mathematics as possible.
The internal details of what makes up the viscous part of the action functional for a particular ice flow model is a good example.
If you are reading that code, you should know that it will involve quantities like the strain rate tensor, and you should be familiar with the fact that this field is usually denoted with a Greek letter epsilon in most books on continuum mechanics.
In these parts of the code, we freely use single-character identifiers like <code class="docutils literal notranslate"><span class="pre">u</span></code> for velocity, as long as they match what appears in textbooks.
We will even sometimes use Greek letters like ε or φ where appropriate.
(Most text editors include shortcuts for inserting these symbols.
For example, in vim, you can insert a Greek letter φ by entering insert mode, typing <code class="docutils literal notranslate"><span class="pre">ctrl</span> <span class="pre">+</span> <span class="pre">k</span></code>, and then typing <code class="docutils literal notranslate"><span class="pre">f</span></code>.
In a Jupyter notebook, you can start typing <code class="docutils literal notranslate"><span class="pre">\phi</span></code> and then hit the tab key.)
These are never to be used in the public user interface, but they can make the code more mnemonic and familiar once you know the mathematics.
The kind of code where you would write like this will be written once, debugged twice, and read hundreds or thousands of times.
Make it look like the math we all know and love, and it’ll be that much easier to pair up with your preexisting conceptions of what that code is for.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="design.html" class="btn btn-neutral float-right" title="Design" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="testing.html" class="btn btn-neutral float-left" title="Testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017, Daniel Shapero

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>